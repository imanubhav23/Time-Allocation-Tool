<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Allocation Tool</title>
    <style>
        .graph-container {
    margin-top: 30px;
    padding: 20px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.area-chart {
    width: 100%;
    height: 400px;
    position: relative;
    margin-top: 20px;
    padding: 20px 40px 40px 60px;
}

.chart-svg {
    width: 100%;
    height: 100%;
}

.area-path {
    fill-opacity: 0.6;
    transition: all 0.3s ease;
}

.area-path:hover {
    fill-opacity: 0.8;
}

.axis-line {
    stroke: #ddd;
    stroke-width: 1;
}

.axis-label {
    font-size: 12px;
    fill: #666;
}

.chart-legend {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-top: 20px;
    padding: 10px;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 14px;
    cursor: pointer;
}

.legend-color {
    width: 15px;
    height: 15px;
    border-radius: 3px;
}.info-box {
    background-color: #e3f2fd;
    border: 1px solid #2196F3;
    border-radius: 5px;
    padding: 15px;
    margin: 20px 0;
    font-size: 14px;
    line-height: 1.5;
}

.error-message {
    color: #f44336;
    text-align: center;
    margin: 10px 0;
    font-weight: bold;
    display: none;
}        
        :root {
            --primary-color: #333333;
            --font-size: 16px;
        }

        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: var(--primary-color);
            font-size: var(--font-size);
        }

        h1, h2 {
            color: var(--primary-color);
            font-size: 24px;
            text-align: center;
        }

        .landing {
            text-align: center;
            padding: 50px 0;
        }

        .start-btn, .calculate-btn {
            padding: 15px 30px;
            font-size: var(--font-size);
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
        }

        .content, .results {
            display: none;
            margin-top: 50px;
        }

        .row {
            display: flex;
            justify-content: space-between;
            gap: 30px;
        }

        .column {
            flex: 1;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 10px;
        }

        .activity-box {
            margin-bottom: 15px;
            padding: 10px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .activity-input {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 10px;
            align-items: center;
        }

        input[type="number"], input[type="text"] {
            padding: 5px;
            font-size: var(--font-size);
            color: var(--primary-color);
        }

        .add-btn {
            display: block;
            width: 100%;
            padding: 10px;
            margin-top: 15px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: var(--font-size);
        }

        label {
            font-weight: bold;
            font-size: var(--font-size);
            color: var(--primary-color);
        }

        span {
            font-size: var(--font-size);
            color: var(--primary-color);
        }

        .fixed-activities {
            margin-top: 30px;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 10px;
        }

        .progress-bar {
            margin: 20px 0;
            background-color: #f5f5f5;
            border-radius: 5px;
            overflow: hidden;
            height: 30px;
            display: flex;
        }

        .progress-segment {
            height: 100%;
            display: inline-block;
            text-align: center;
            color: white;
            line-height: 30px;
            font-size: 14px;
        }

        .insight {
            text-align: center;
            font-size: 18px;
            margin: 20px 0;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 5px;
        }

    .viz-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        padding: 20px;
    }

    .treemap {
        flex: 2;
        min-width: 300px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .time-box {
        position: relative;
        border-radius: 4px;
        padding: 8px;
        margin: 4px;
        color: white;
        transition: all 0.3s ease;
        cursor: pointer;
    }

    .time-box:hover {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    .time-box h3 {
        margin: 0;
        font-size: 14px;
    }

    .time-box p {
        margin: 4px 0 0 0;
        font-size: 12px;
    }

    .insights {
        padding: 20px;
        background: #f5f5f5;
        border-radius: 8px;
        margin-top: 20px;
    }

    .legend {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin: 10px 0;
    }

    .legend-item {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 12px;
    }

    .legend-color {
        width: 12px;
        height: 12px;
        border-radius: 3px;
    }

    .percentage-bar {
        height: 4px;
        background: #eee;
        border-radius: 2px;
        margin-top: 4px;
    }

    .percentage-fill {
        height: 100%;
        border-radius: 2px;
        transition: width 0.3s ease;
    }

    .summary {
        margin-top: 20px;
        padding: 15px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .summary h3 {
        margin: 0 0 10px 0;
        color: #333;
    }

    .metric {
        display: flex;
        justify-content: space-between;
        margin: 5px 0;
        font-size: 14px;
    }
        
    </style>
</head>
<body>
    <div class="landing">
    <h1>Time Allocation Tool</h1>
    <div class="info-box">
        <strong>Important Information:</strong>
        <p>There are 168 hours in a week (24 hours Ã— 7 days). Please allocate all 168 hours across your activities. The calculator will help you track the total and ensure you've accounted for all hours in your week.</p>
        <p>Current Total: <span id="totalHoursSpent">0</span>/168 hours</p>
    </div>
    <button class="start-btn" onclick="startTool()">Start</button>
</div>

    <div id="content" class="content">
        <div class="row">
            <div class="column">
                <h2>Investments</h2>
                <div id="investments-list">
                    <div class="activity-box">
                        <div class="activity-input">
                            <label>Friends/Family Time:</label>
                            <input type="number" min="0" max="168" value="0">
                            <span>hours/week</span>
                        </div>
                    </div>
                    <div class="activity-box">
                        <div class="activity-input">
                            <label>Exercise:</label>
                            <input type="number" min="0" max="168" value="0">
                            <span>hours/week</span>
                        </div>
                    </div>
                    <div class="activity-box">
                        <div class="activity-input">
                            <label>Learning:</label>
                            <input type="number" min="0" max="168" value="0">
                            <span>hours/week</span>
                        </div>
                    </div>
                    <div class="activity-box">
                        <div class="activity-input">
                            <label>Personal Development:</label>
                            <input type="number" min="0" max="168" value="0">
                            <span>hours/week</span>
                        </div>
                    </div>
                    <div class="activity-box">
                        <div class="activity-input">
                            <label>Work/Career:</label>
                            <input type="number" min="0" max="168" value="0">
                            <span>hours/week</span>
                        </div>
                    </div>
                </div>
                <button class="add-btn" onclick="addNewActivity('investments-list')">+ Add Investment</button>
            </div>

            <div class="column">
                <h2>Distractions</h2>
                <div id="distractions-list">
                    <div class="activity-box">
                        <div class="activity-input">
                            <label>Social Media:</label>
                            <input type="number" min="0" max="168" value="0">
                            <span>hours/week</span>
                        </div>
                    </div>
                    <div class="activity-box">
                        <div class="activity-input">
                            <label>Streaming Services:</label>
                            <input type="number" min="0" max="168" value="0">
                            <span>hours/week</span>
                        </div>
                    </div>
                    <div class="activity-box">
                        <div class="activity-input">
                            <label>Gaming:</label>
                            <input type="number" min="0" max="168" value="0">
                            <span>hours/week</span>
                        </div>
                    </div>
                    <div class="activity-box">
                        <div class="activity-input">
                            <label>Mindless Browsing:</label>
                            <input type="number" min="0" max="168" value="0">
                            <span>hours/week</span>
                        </div>
                    </div>
                    <div class="activity-box">
                        <div class="activity-input">
                            <label>Procrastination:</label>
                            <input type="number" min="0" max="168" value="0">
                            <span>hours/week</span>
                        </div>
                    </div>
                </div>
                <button class="add-btn" onclick="addNewActivity('distractions-list')">+ Add Distraction</button>
            </div>
        </div>

        <div class="fixed-activities">
            <div class="activity-box">
                <div class="activity-input">
                    <label>Sleep:</label>
                    <input type="number" min="0" max="168" value="56">
                    <span>hours/week</span>
                </div>
            </div>
            <div class="activity-box">
                <div class="activity-input">
                    <label>Work:</label>
                    <input type="number" min="0" max="168" value="40">
                    <span>hours/week</span>
                </div>
            </div>
        </div>
<div id="error-message" class="error-message">
    Please allocate exactly 168 hours. You cannot proceed until all hours are accounted for.
</div>
        <button class="calculate-btn" onclick="calculateResults()">Calculate and See Results</button>
    </div>

    <div id="results" class="results">
        <h2>Your Time Allocation Results</h2>
        <div class="progress-bar" id="timeBar"></div>
        <div class="insight" id="insight"></div>
        <div class="viz-container">
    <div class="treemap" id="timeTreemap"></div>
</div>
<div class="graph-container">
    <h3>Time Distribution Area Chart</h3>
    <div class="area-chart" id="timeAreaChart"></div>
    <div class="chart-legend" id="chartLegend"></div>
</div>

<div class="insights" id="timeInsights"></div>
    </div>

<script>
// 1. Start with your existing utility functions
function startTool() {
    document.getElementById('content').style.display = 'block';
    document.querySelector('.landing').style.display = 'none';
}

function updateTotal() {
    // ... existing updateTotal code ...
}

// 2. Add collectData as a standalone function (moved from inside createTimeVisualization)
function collectData() {
    const investments = Array.from(document.querySelectorAll('#investments-list .activity-box'))
        .map(box => ({
            name: box.querySelector('label')?.textContent.replace(':', '') || 
                  box.querySelector('input[type="text"]')?.value || 'Other',
            value: Number(box.querySelector('input[type="number"]').value),
            category: 'Investments'
        }))
        .filter(item => item.value > 0);

    const distractions = Array.from(document.querySelectorAll('#distractions-list .activity-box'))
        .map(box => ({
            name: box.querySelector('label')?.textContent.replace(':', '') || 
                  box.querySelector('input[type="text"]')?.value || 'Other',
            value: Number(box.querySelector('input[type="number"]').value),
            category: 'Distractions'
        }))
        .filter(item => item.value > 0);

    const fixed = Array.from(document.querySelectorAll('.fixed-activities .activity-box'))
        .map(box => ({
            name: box.querySelector('label').textContent.replace(':', ''),
            value: Number(box.querySelector('input[type="number"]').value),
            category: 'Fixed'
        }))
        .filter(item => item.value > 0);

    return [...investments, ...distractions, ...fixed];
}

// 3. Keep your addNewActivity function
function addNewActivity(listId) {
    // ... existing addNewActivity code ...
}

// 4. Update the calculateResults function
function calculateResults() {
    const total = Number(document.getElementById('totalHoursSpent').textContent);
    if (total !== 168) {
        return;
    }

    const investments = Array.from(document.querySelectorAll('#investments-list input[type="number"]'))
        .reduce((sum, input) => sum + Number(input.value), 0);
    
    const distractions = Array.from(document.querySelectorAll('#distractions-list input[type="number"]'))
        .reduce((sum, input) => sum + Number(input.value), 0);
    
    const sleep = Number(document.querySelector('.fixed-activities input[value="56"]').value);
    const work = Number(document.querySelector('.fixed-activities input[value="40"]').value);
    
    const percentages = {
        investments: (investments / 168) * 100,
        distractions: (distractions / 168) * 100,
        sleep: (sleep / 168) * 100,
        work: (work / 168) * 100
    };

    const timeBar = document.getElementById('timeBar');
    timeBar.innerHTML = '';
    
    const colors = {
        investments: '#4CAF50',
        distractions: '#f44336',
        sleep: '#2196F3',
        work: '#FFC107'
    };

    Object.entries(percentages).forEach(([category, percentage]) => {
        if (percentage > 0) {
            const segment = document.createElement('div');
            segment.className = 'progress-segment';
            segment.style.width = `${percentage}%`;
            segment.style.backgroundColor = colors[category];
            segment.textContent = `${category}: ${percentage.toFixed(1)}%`;
            timeBar.appendChild(segment);
        }
    });

    const ratio = distractions / investments;
    const insight = document.getElementById('insight');
    if (distractions > investments) {
        insight.textContent = `You spend ${ratio.toFixed(1)} times more time on distractions than investments.`;
    } else if (investments > distractions) {
        insight.textContent = `You spend ${(1/ratio).toFixed(1)} times more time on investments than distractions.`;
    } else {
        insight.textContent = `Your time is equally split between investments and distractions.`;
    }

    document.getElementById('results').style.display = 'block';
    document.getElementById('content').style.display = 'none';
    
    // Create all visualizations
    createTimeVisualization();
    const data = collectData();
    createAreaChart(data);
}

// 5. Update createTimeVisualization (remove collectData from inside it)
function createTimeVisualization() {
    const data = collectData();  // Now calls the standalone function
    
    const colors = {
        Investments: '#4CAF50',
        Distractions: '#f44336',
        Fixed: '#2196F3'
    };

    // ... rest of existing createTimeVisualization code ...
}

// 6. Keep your existing createAreaChart function
function createAreaChart(data) {
    // ... existing createAreaChart code ...
}

// 7. Update the window resize handler
window.addEventListener('resize', () => {
    if (document.getElementById('results').style.display === 'block') {
        createTimeVisualization();
        const data = collectData();
        createAreaChart(data);
    }
});

// 8. Keep your existing DOMContentLoaded event listener
document.addEventListener('DOMContentLoaded', function() {
    // ... existing DOMContentLoaded code ...
});
</script>
</body>
</html>
