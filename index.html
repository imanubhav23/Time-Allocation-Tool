<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Allocation Tool</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <style>
        /* Basic Styling */
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .landing {
            text-align: center;
        }
        .progress-bar {
            display: flex;
            height: 30px;
            margin-top: 20px;
        }
        .progress-segment {
            text-align: center;
            color: white;
            padding: 5px 10px;
        }
        .results {
            display: none;
        }
        .view-insights-btn {
            margin-top: 20px;
            padding: 10px;
            font-size: 18px;
            cursor: pointer;
        }
        #sankey-diagram {
            width: 100%;
            height: 400px;
            margin-top: 30px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="landing">
        <h1>Time Allocation Tool</h1>
        <button onclick="startTool()">Start Tool</button>
    </div>

    <div id="content" class="content" style="display:none;">
        <h2>Track Your Weekly Time</h2>
        
        <div id="investments-list">
            <h3>Investments</h3>
            <div class="activity-box">
                <div class="activity-input">
                    <input type="number" min="0" max="168" value="0" placeholder="Investments Hours" id="investments">
                    <span>hours/week</span>
                </div>
            </div>
        </div>

        <div id="distractions-list">
            <h3>Distractions</h3>
            <div class="activity-box">
                <div class="activity-input">
                    <input type="number" min="0" max="168" value="0" placeholder="Distractions Hours" id="distractions">
                    <span>hours/week</span>
                </div>
            </div>
        </div>

        <div class="fixed-activities">
            <h3>Fixed Activities</h3>
            <label>Sleep (56 hours): <input type="number" id="sleep" value="56" disabled></label>
            <label>Work (40 hours): <input type="number" id="work" value="40" disabled></label>
        </div>

        <button onclick="calculateResults()">Calculate Results</button>
    </div>

    <div id="results" class="results">
        <h2>Your Time Allocation Results</h2>
        <div class="progress-bar" id="timeBar"></div>
        <div class="insight" id="insight"></div>
        <button class="view-insights-btn" onclick="viewInsights()">View Insights</button>
    </div>

    <div id="sankey-diagram"></div>

    <script>
        google.charts.load('current', {packages: ['sankey']});

        function startTool() {
            document.getElementById('content').style.display = 'block';
            document.querySelector('.landing').style.display = 'none';
        }

        function calculateResults() {
            const investments = parseInt(document.getElementById('investments').value);
            const distractions = parseInt(document.getElementById('distractions').value);
            const sleep = parseInt(document.getElementById('sleep').value);
            const work = parseInt(document.getElementById('work').value);

            const total = 168; // Total hours in a week
            const unaccounted = total - (investments + distractions + sleep + work);

            const percentages = {
                investments: (investments / total) * 100,
                distractions: (distractions / total) * 100,
                sleep: (sleep / total) * 100,
                work: (work / total) * 100,
                unaccounted: (unaccounted / total) * 100
            };

            // Update progress bar
            const timeBar = document.getElementById('timeBar');
            timeBar.innerHTML = '';

            const colors = {
                investments: '#4CAF50',
                distractions: '#f44336',
                sleep: '#2196F3',
                work: '#FFC107',
                unaccounted: '#9E9E9E'
            };

            Object.entries(percentages).forEach(([category, percentage]) => {
                if (percentage > 0) {
                    const segment = document.createElement('div');
                    segment.className = 'progress-segment';
                    segment.style.width = `${percentage}%`;
                    segment.style.backgroundColor = colors[category];
                    segment.textContent = `${category}: ${percentage.toFixed(1)}%`;
                    timeBar.appendChild(segment);
                }
            });

            // Generate insight
            const ratio = distractions / investments;
            const insight = document.getElementById('insight');
            if (distractions > investments) {
                insight.textContent = `You spend ${ratio.toFixed(1)} times more time on distractions than investments.`;
            } else if (investments > distractions) {
                insight.textContent = `You spend ${(1/ratio).toFixed(1)} times more time on investments than distractions.`;
            } else {
                insight.textContent = `Your time is equally split between investments and distractions.`;
            }

            // Show results
            document.getElementById('results').style.display = 'block';
            document.getElementById('content').style.display = 'none';
        }

        function viewInsights() {
            const investments = parseInt(document.getElementById('investments').value);
            const distractions = parseInt(document.getElementById('distractions').value);
            const sleep = parseInt(document.getElementById('sleep').value);
            const work = parseInt(document.getElementById('work').value);

            // Prepare data for Sankey diagram
            const data = new google.visualization.DataTable();
            data.addColumn('string', 'From');
            data.addColumn('string', 'To');
            data.addColumn('number', 'Hours');

            // Add flows (These could be better optimized to show activities more meaningfully)
            data.addRows([
                ['Investments', 'Sleep', sleep],
                ['Investments', 'Work', work],
                ['Investments', 'Distractions', distractions],
                ['Investments', 'Investments', investments],
                ['Distractions', 'Sleep', sleep],
                ['Distractions', 'Work', work],
                ['Distractions', 'Distractions', distractions],
            ]);

            // Create and draw Sankey diagram
            const chart = new google.visualization.Sankey(document.getElementById('sankey-diagram'));
            chart.draw(data);

            // Show the Sankey diagram
            document.getElementById('sankey-diagram').style.display = 'block';
        }
    </script>
</body>
</html>
